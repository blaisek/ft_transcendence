"use strict";(self.webpackChunktranscendence=self.webpackChunktranscendence||[]).push([[283],{283:(n,e,s)=>{s.r(e),s.d(e,{default:()=>t});var o=s(555),a=s(27);const t=class extends o.default{constructor(n){super(n),this.setTitle("Login")}async getHtml(){return'\n        <div class="container">\n        <div class="row">\n            <div class="col-md-6 offset-md-3">\n                <h2 class="text-center mt-5">Login</h2>\n                <div class="card my-5">\n                    <div class="card-body">\n                        <form id="login-form">\n                            <div class="form-group">\n                                <label for="username">Username</label>\n                                <input type="username" class="form-control" name="username" aria-describedby="emailHelp" placeholder="Enter username">\n                            </div>\n                            <div class="form-group">\n                                <label for="password">Password</label>\n                                <input type="password" class="form-control" name="password" placeholder="Password">\n                            </div>\n                            <button type="submit" class="btn btn-primary">Login</button>\n                            <p class="mt-3">\n                                don\'t have an account? <a href="/signup" class="nav__link" data-link>Sign Up here</a>\n                            </p>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n        '}async initialize(){document.getElementById("login-form").addEventListener("submit",this.loginUser)}async loginUser(n){const e=window.location.hostname;n.preventDefault();const s=n.target,o=new FormData(s);try{const n=await fetch(`https://${e}/api/login/`,{method:"POST",body:o});if(console.log("NTM: ",n),n.ok){const e=(await n.json()).token;localStorage.setItem("token",e),await(0,a.Ms)(),await(0,a.n5)(),console.log("Login successful! Token:",e),window.location.href="/home"}else console.log("Login failed!"),console.log(n.statusText)}catch(n){console.log(n)}}}}}]);